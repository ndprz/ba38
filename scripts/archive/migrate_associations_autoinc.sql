BEGIN TRANSACTION;

-- Renommage de la table existante
ALTER TABLE associations RENAME TO associations_old;

-- Recréation de la table avec AUTOINCREMENT
CREATE TABLE associations (
    Id INTEGER PRIMARY KEY AUTOINCREMENT,

    code_VIF TEXT,
    code_SIRET TEXT,
    nom_association TEXT,
    adresse_siege TEXT,
    date_agrement_regional TEXT,
    date_FIN_habilitation TEXT,
    validite TEXT,
    Modification_par TEXT,
    raison_sociale_VIF TEXT,
    adresse_association_1 TEXT,
    adresse_association_2 TEXT,
    CP TEXT,
    COMMUNE TEXT,
    tel_association TEXT,
    courriel_association TEXT,
    site_internet TEXT,
    adresse_distribution_1 TEXT,
    chauffeur TEXT,
    adresse_distribution_2 TEXT,
    CP2 TEXT,
    COMMUNE2 TEXT,
    tel_distribution TEXT,
    secteur_geographique TEXT,
    nom_president_ou_officiel TEXT,
    tel_president_officiel_1 TEXT,
    tel_president_officiel_2 TEXT,
    courriel_president TEXT,
    responsable_operationnel TEXT,
    tel_resp_operationnel_1 TEXT,
    tel_resp_operationnel_2 TEXT,
    courriel_resp_operationnel TEXT,
    responsable_IE TEXT,
    tel_resp_IE TEXT,
    courriel_resp_IE1 TEXT,
    courriel_resp_IE2 TEXT,
    responsable_distribution TEXT,
    tel_resp_distribution_1 TEXT,
    tel_resp_distribution_2 TEXT,
    courriel_distribution TEXT,
    responsable_HySA TEXT,
    teL_resp_Hysa_1 TEXT,
    tel_resp_Hysa_2 TEXT,
    courriel_resp_Hysa TEXT,
    responsable_tresorerie TEXT,
    tel_resp_tresorerie_1 TEXT,
    tel_resp_tresorerie_2 TEXT,
    courriel_resp_tresorerie TEXT,
    CAR TEXT,
    logiciel_Ticadi_utilise TEXT,
    participation_a_la_collecte TEXT,
    garde_collecte TEXT,
    date_AG TEXT,
    jour_de_passage_a_la_BAI TEXT,
    menu_sec TEXT,
    menu_frais TEXT,
    heure_de_passage TEXT,
    Emplacement TEXT,
    jour_distribution TEXT,
    heure TEXT,
    frequence TEXT,
    besoins_particuliers TEXT,
    solution_et_alarme TEXT,
    denrees_destines_a TEXT,
    autres_quels TEXT,
    origine_des_denrees_distribuees TEXT,
    lesquels TEXT,
    produits_distribues TEXT,
    sacs_isothermes TEXT,
    combien_de_benevoles TEXT,
    combien_de_benevoles_beneficiaires TEXT,
    combien_de_salaries TEXT,
    colis TEXT,
    Remarques_sur_les_denrees_BAI TEXT,
    les_locaux_appartiennent_a TEXT,
    etat_local_de_distribution TEXT,
    etat_local_de_stockage TEXT,
    etat_chambre_froide TEXT,
    nbre_refrigerateur TEXT,
    etat_refrigerateur TEXT,
    nbre_congelateurs TEXT,
    etat_congelateur TEXT,
    vehicule_appartient_a TEXT,
    vehicule_adapte_transport_denrees_alimentaires TEXT,
    nettoyage_regulier_vehicule TEXT,
    tel_chauffeur TEXT,
    distance_aller_en_km TEXT,
    temps_moyen_de_transport_des_marchandises_en_MN TEXT,
    transport_des_produits_frais_dans TEXT,
    administratif TEXT,
    financier TEXT,
    formation TEXT,
    sante__prevention TEXT,
    cuisine_et_nutrition TEXT,
    divertissements TEXT,
    divers TEXT,
    autre_action TEXT,
    drive_link TEXT,
    date_modif TEXT,
    heure_modif TEXT,
    user_modif TEXT,
    responsable_tresorerie2 TEXT,
    courriel_resp_tresorerie2 TEXT,
    nbre_beneficaires INT,
    adresse_courrier_complete TEXT,
    responsable_accueil TEXT,
    responsable_collecte TEXT,
    responsable_proxidon TEXT,
    tel_resp_accueil TEXT,
    tel_resp_collecte TEXT,
    tel_resp_proxidon TEXT,
    courriel_resp_accueil TEXT,
    courriel_resp_collecte TEXT,
    courriel_resp_proxidon TEXT,
    statut_resp_accueil TEXT,
    statut_resp_collecte TEXT,
    statut_resp_proxidon TEXT,
    statut_president TEXT,
    statut_resp_distribution TEXT,
    statut_resp_tresorerie TEXT,
    statut_resp_hysa TEXT,
    statut_resp_ie TEXT,
    statut_autre TEXT,
    presence_travailleur_social TEXT,
    appartient_grand_reseau_habilitation_nationale TEXT,
    reseau_national TEXT,
    statut TEXT,
    habilitation_regionale TEXT,
    habilitation_regionale_encours TEXT,
    habilitation_regionale_en_cours_prochaine_session TEXT,
    categorie TEXT,
    mode_distrib_colis TEXT,
    mode_distrib_maraude TEXT,
    mode_distrib_repas TEXT,
    mode_distrib_petit_dejeuner TEXT,
    particularite_hebergement_longue_duree TEXT,
    particularite_hebergement_urgence TEXT,
    particularite_dispositif_itinerant TEXT,
    particularite_livraison_domicile TEXT,
    activite_principale_aide_alimentaire TEXT,
    public_accueilli_enfants_bas_age TEXT,
    public_accueilli_mineurs_isoles TEXT,
    public_accueilli_jeunes_travailleurs_etudiants TEXT,
    public_accueilli_femmes_victimes_violence TEXT,
    produits_souhaites TEXT,
    produits_souhaites_commentaire TEXT,
    autres_approvisionnements TEXT,
    partenaire_souhaite_FSE TEXT,
    partenaire_souhaite_convention_delegation_retrait TEXT,
    partenaire_souhaite_convention_PROXIDON TEXT,
    distribution_toute_annee TEXT,
    alternative_fermeture TEXT,
    livraison_par_bai TEXT,
    piece_accueil TEXT,
    piece_accueil_nbre TEXT,
    piece_accueil_volume_surface TEXT,
    cuisine TEXT,
    cuisine_nbre TEXT,
    cuisine_volume_surface TEXT,
    local_de_distribution TEXT,
    local_de_distribution_nbre TEXT,
    local_de_distribution_volume_surface TEXT,
    local_entreposage TEXT,
    local_entreposage_nbre TEXT,
    local_entreposage_volume_surface TEXT,
    chambre_froide_positive TEXT,
    chambre_froide_positive_nbre TEXT,
    chambre_froide_positive_volume_surface TEXT,
    chambre_froide_negative TEXT,
    chambre_froide_negative_nbre TEXT,
    chambre_froide_negative_volume_surface TEXT,
    congelateur TEXT,
    congelateur_nbre TEXT,
    congelateur_volume_surface TEXT,
    refrigerateur TEXT,
    refrigerateur_nbre TEXT,
    refrigerateur_volume_surface TEXT,
    container_isotherme_agree TEXT,
    container_isotherme_agree_nbre TEXT,
    container_isotherme_agree_volume_surface TEXT,
    glaciere TEXT,
    glaciere_nbre TEXT,
    glaciere_volume_surface TEXT,
    plaques_eutectiques TEXT,
    plaques_eutectiques_nbre TEXT,
    plaques_eutectiques_volume_surface TEXT,
    vehicule_frigorifique TEXT,
    vehicule_frigorifique_nbre TEXT,
    vehicule_frigorifique_volume_surface TEXT,
    vehicule_isotherme TEXT,
    vehicule_isotherme_nbre TEXT,
    vehicule_isotherme_volume_surface TEXT,
    autre_vehicule TEXT,
    autre_vehicule_nbre TEXT,
    autre_vehicule_volume_surface TEXT,
    Logiciel_autre TEXT,
    Logiciel_autre_lequel TEXT,
    nbre_beneficiaires_annuel_previsionnel TEXT,
    nbre_beneficiaires_trimestriels_previsionnel TEXT,
    nbre_foyers TEXT
);

-- Copie intégrale des données (IDs conservés)
INSERT INTO associations
SELECT * FROM associations_old;

-- Suppression de l’ancienne table
DROP TABLE associations_old;

COMMIT;
